<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë©”ëª¨ì¥</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input, textarea, button { margin: 5px 0; width: 100%; padding: 10px; }
        .memo-container { border: 1px solid #ddd; padding: 10px; margin-top: 10px; }
        .delete-btn, .edit-btn { background-color: red; color: white; border: none; padding: 5px; cursor: pointer; }
        .edit-btn { background-color: blue; margin-right: 5px; }
    </style>
</head>
<body>

<h2>ğŸ“Œ ë©”ëª¨ì¥</h2>

<input type="text" id="title" placeholder="ì œëª© ì…ë ¥">
<textarea id="content" placeholder="ë‚´ìš© ì…ë ¥"></textarea>
<button onclick="addMemo()">ë©”ëª¨ ì¶”ê°€</button>

<h3>ğŸ“‹ ë©”ëª¨ ëª©ë¡</h3>
<div id="memo-list"></div>

<script>
    const apiUrl = "http://localhost:8080/memos"; // ìŠ¤í”„ë§ ì„œë²„ ì£¼ì†Œ

    // ë©”ëª¨ ê°€ì ¸ì˜¤ê¸°
    function fetchMemos() {
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const memoList = document.getElementById("memo-list");
                memoList.innerHTML = "";
                data.forEach(memo => {
                    memoList.innerHTML += `
                            <div class="memo-container" id="memo-${memo.id}">
                                <h4>${memo.title}</h4>
                                <p>${memo.content}</p>
                                <button class="edit-btn" onclick="editMemo(${memo.id})">ìˆ˜ì •</button>
                                <button class="delete-btn" onclick="deleteMemo(${memo.id})">ì‚­ì œ</button>
                            </div>
                        `;
                });
            });
    }

    // ë©”ëª¨ ì¶”ê°€
    function addMemo() {
        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;

        fetch(apiUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ title, content })
        }).then(() => {
            fetchMemos();
            document.getElementById("title").value = "";
            document.getElementById("content").value = "";
        });
    }

    // ë©”ëª¨ ì‚­ì œ
    function deleteMemo(id) {
        fetch(`${apiUrl}/${id}`, { method: "DELETE" })
            .then(() => fetchMemos());
    }

    // ë©”ëª¨ ìˆ˜ì •
    function editMemo(id) {
        const newTitle = prompt("ìƒˆë¡œìš´ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”:");
        const newContent = prompt("ìƒˆë¡œìš´ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”:");

        if (newTitle && newContent) {
            fetch(`${apiUrl}/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ title: newTitle, content: newContent })
            }).then(() => fetchMemos());
        }
    }

    // í˜ì´ì§€ ë¡œë“œ ì‹œ ë©”ëª¨ ê°€ì ¸ì˜¤ê¸°
    fetchMemos();
</script>

</body>
</html>