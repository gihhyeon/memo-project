<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>메모장</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        input, textarea, button { margin: 5px 0; width: 100%; padding: 10px; }
        .memo-container { border: 1px solid #ddd; padding: 10px; margin-top: 10px; }
        .delete-btn, .edit-btn { background-color: red; color: white; border: none; padding: 5px; cursor: pointer; }
        .edit-btn { background-color: blue; margin-right: 5px; }
    </style>
</head>
<body>

<h2>📌 메모장</h2>

<input type="text" id="title" placeholder="제목 입력">
<textarea id="content" placeholder="내용 입력"></textarea>
<button onclick="addMemo()">메모 추가</button>

<h3>📋 메모 목록</h3>
<div id="memo-list"></div>

<script>
    const apiUrl = "http://localhost:8080/memos"; // 스프링 서버 주소

    // 메모 가져오기
    function fetchMemos() {
        fetch(apiUrl)
            .then(response => response.json())
            .then(data => {
                const memoList = document.getElementById("memo-list");
                memoList.innerHTML = "";
                data.forEach(memo => {
                    memoList.innerHTML += `
                            <div class="memo-container" id="memo-${memo.id}">
                                <h4>${memo.title}</h4>
                                <p>${memo.content}</p>
                                <button class="edit-btn" onclick="editMemo(${memo.id})">수정</button>
                                <button class="delete-btn" onclick="deleteMemo(${memo.id})">삭제</button>
                            </div>
                        `;
                });
            });
    }

    // 메모 추가
    function addMemo() {
        const title = document.getElementById("title").value;
        const content = document.getElementById("content").value;

        fetch(apiUrl, {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ title, content })
        }).then(() => {
            fetchMemos();
            document.getElementById("title").value = "";
            document.getElementById("content").value = "";
        });
    }

    // 메모 삭제
    function deleteMemo(id) {
        fetch(`${apiUrl}/${id}`, { method: "DELETE" })
            .then(() => fetchMemos());
    }

    // 메모 수정
    function editMemo(id) {
        const newTitle = prompt("새로운 제목을 입력하세요:");
        const newContent = prompt("새로운 내용을 입력하세요:");

        if (newTitle && newContent) {
            fetch(`${apiUrl}/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ title: newTitle, content: newContent })
            }).then(() => fetchMemos());
        }
    }

    // 페이지 로드 시 메모 가져오기
    fetchMemos();
</script>

</body>
</html>